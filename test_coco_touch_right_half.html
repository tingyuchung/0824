<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coco å³åŠé‚Šè§¸æ§ç¹¼çºŒå°è©±æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(#a7eaff, #f0f8ff);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .coco-dialog {
            background: #000;
            color: #fff;
            border: 4px solid #fff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            position: relative;
        }
        
        .dialog-text {
            font-size: 18px;
            line-height: 1.5;
            margin-bottom: 20px;
            white-space: pre-line;
        }
        
        .option-selected {
            background: #fff;
            color: #000;
            padding: 8px 16px;
            margin: 8px 0;
            border-radius: 4px;
            display: inline-block;
            animation: optionBlink 1s ease-in-out infinite;
        }
        
        .dialog-ok {
            background: transparent;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            text-decoration: underline;
        }
        
        .test-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin: 8px;
        }
        
        .status {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
            font-family: monospace;
        }
        
        .touch-hint {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            padding: 12px;
            margin: 16px 0;
            color: #0c5460;
        }
        
        .touch-zones {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }
        
        .touch-zone {
            position: absolute;
            top: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: rgba(255,255,255,0.8);
            font-weight: bold;
        }
        
        .touch-zone.left-half {
            left: 0;
            right: 50%;
            background: rgba(255, 0, 0, 0.1);
            border-right: 2px dashed rgba(255, 0, 0, 0.5);
        }
        
        .touch-zone.right-half {
            left: 50%;
            right: 0;
            background: rgba(0, 255, 0, 0.1);
            border-left: 2px dashed rgba(0, 255, 0, 0.5);
        }
        
        .option-zones {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }
        
        .option-zone {
            position: absolute;
            left: 0;
            right: 0;
            height: 60px;
            border: 2px dashed rgba(255,255,255,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: rgba(255,255,255,0.7);
        }
        
        .option-zone.zone-0 { top: 40px; }
        .option-zone.zone-1 { top: 100px; }
        .option-zone.zone-2 { top: 160px; }
        
        @keyframes optionBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.7; }
        }
        
        .feature-highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ­ Coco å³åŠé‚Šè§¸æ§ç¹¼çºŒå°è©±æ¸¬è©¦</h1>
        
        <div class="feature-highlight">
            <strong>âœ¨ æ–°åŠŸèƒ½ï¼š</strong> è§¸æ§è¢å¹•å³åŠé‚Šå³å¯ç¹¼çºŒå°è©±ï¼Œç„¡éœ€ç²¾ç¢ºé»æ“Š â–¼ æŒ‰éˆ•ï¼
        </div>
        
        <div class="touch-hint">
            <strong>ğŸ“± è§¸æ§æ¸¬è©¦ï¼š</strong> 
            <ul>
                <li><strong>å·¦åŠé‚Šï¼ˆç´…è‰²å€åŸŸï¼‰</strong>ï¼šé¸æ“‡å°è©±é¸é …</li>
                <li><strong>å³åŠé‚Šï¼ˆç¶ è‰²å€åŸŸï¼‰</strong>ï¼šç¹¼çºŒå°è©±</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª æ¸¬è©¦æ­¥é©Ÿ</h2>
            <ol>
                <li>é»æ“Š"é–‹å§‹å°è©±"æŒ‰éˆ•</li>
                <li>è§¸æ§å°è©±æ¡†å·¦åŠé‚Šé¸æ“‡é¸é …</li>
                <li>è§¸æ§å°è©±æ¡†å³åŠé‚Šç¹¼çºŒå°è©±</li>
                <li>è§€å¯Ÿè§¸æ§å€åŸŸæª¢æ¸¬çµæœ</li>
            </ol>
        </div>
        
        <button class="test-button" onclick="startDialog()">é–‹å§‹å°è©±</button>
        <button class="test-button" onclick="resetDialog()">é‡ç½®å°è©±</button>
        
        <div id="coco-dialog" class="coco-dialog">
            <div id="dialog-text" class="dialog-text">
                æ­¡è¿ä¾†åˆ° Johnny çš„ç”Ÿæ—¥å†’éšªï¼
            </div>
            <button id="dialog-ok" class="dialog-ok">â–¼</button>
            
            <!-- è§¸æ§å€åŸŸæŒ‡ç¤ºå™¨ -->
            <div class="touch-zones">
                <div class="touch-zone left-half">é¸æ“‡é¸é …å€åŸŸ</div>
                <div class="touch-zone right-half">ç¹¼çºŒå°è©±å€åŸŸ</div>
            </div>
            
            <!-- é¸é …è§¸æ§å€åŸŸæŒ‡ç¤ºå™¨ -->
            <div class="option-zones">
                <div class="option-zone zone-0">é¸é … 1 è§¸æ§å€åŸŸ</div>
                <div class="option-zone zone-1">é¸é … 2 è§¸æ§å€åŸŸ</div>
                <div class="option-zone zone-2">é¸é … 3 è§¸æ§å€åŸŸ</div>
            </div>
        </div>
        
        <div class="status">
            <div><strong>ç•¶å‰éšæ®µ:</strong> <span id="current-phase">æœªé–‹å§‹</span></div>
            <div><strong>é¸ä¸­é¸é …:</strong> <span id="selected-option">ç„¡</span></div>
            <div><strong>è§¸æ§åº§æ¨™:</strong> <span id="touch-coords">ç„¡</span></div>
            <div><strong>è§¸æ§å€åŸŸ:</strong> <span id="touch-area">ç„¡</span></div>
            <div><strong>é¸é …ç´¢å¼•:</strong> <span id="option-index">ç„¡</span></div>
            <div><strong>è§¸æ§çµæœ:</strong> <span id="touch-result">ç„¡</span></div>
        </div>
    </div>

    <script>
        let currentPhase = 'none';
        let selectedOption = 0;
        
        const dialogData = {
            intro: 'COCOï¼šå˜¿ï½ä½ çµ‚æ–¼ä¾†å•¦ï¼ä»Šå¤©æ˜¯ä½ çš„ 28 æ­²ç”Ÿæ—¥å†’éšªä¹‹æ—¥ï¼',
            options: [
                'å“‡ï¼å¦³é‚„ç‰¹åœ°æº–å‚™äº†éŠæˆ²çµ¦æˆ‘ï¼Ÿ',
                'å†’éšªï¼Ÿè©²ä¸æœƒæœ‰é™·é˜±å§â€¦â€¦',
                'ç•¶ç„¶ï¼æˆ‘è¶…æœŸå¾…çš„ï¼'
            ],
            responses: [
                'COCOï¼šå˜¿å˜¿ï¼Œä¸ç„¶ä½ ä»¥ç‚ºæˆ‘å¹³å¸¸å·å·åœ¨å¿™ä»€éº¼ï¼Ÿ',
                'COCOï¼šè¢«ä½ ç™¼ç¾äº†ï¼Ÿä¸éå°±ç®—æœ‰é™·é˜±ï¼Œæˆ‘ä¹Ÿæœƒé™ªä½  â¤',
                'COCOï¼šå°±çŸ¥é“ä½ æœƒé€™éº¼èªªï½æœç„¶æ˜¯æˆ‘çš„å¯¶è²ï¼'
            ]
        };
        
        function updateStatus(phase, option, coords, area, index, result) {
            document.getElementById('current-phase').textContent = phase;
            document.getElementById('selected-option').textContent = option;
            document.getElementById('touch-coords').textContent = coords;
            document.getElementById('touch-area').textContent = area;
            document.getElementById('option-index').textContent = index;
            if (result) {
                document.getElementById('touch-result').textContent = result;
            }
        }
        
        function startDialog() {
            currentPhase = 'intro';
            selectedOption = 0;
            
            const dialog = document.getElementById('coco-dialog');
            const dialogText = document.getElementById('dialog-text');
            const dialogOk = document.getElementById('dialog-ok');
            
            dialog.classList.add('show');
            dialogText.innerText = dialogData.intro;
            dialogOk.onclick = showOptions;
            
            updateStatus('ä»‹ç´¹éšæ®µ', 'ç„¡', 'ç„¡', 'ç„¡', 'ç„¡', 'è§¸æ§å³åŠé‚Šç¹¼çºŒå°è©±');
        }
        
        function showOptions() {
            currentPhase = 'options';
            
            const dialogText = document.getElementById('dialog-text');
            const dialogOk = document.getElementById('dialog-ok');
            
            const optionsHtml = dialogData.options.map((option, idx) => {
                const selected = idx === selectedOption;
                if (selected) {
                    return `<div class="option-selected">${option}</div>`;
                } else {
                    return `<div>${option}</div>`;
                }
            }).join('');
            
            dialogText.innerHTML = optionsHtml;
            dialogOk.onclick = selectCurrentOption;
            
            updateStatus('é¸é …éšæ®µ', `é¸é … ${selectedOption + 1}`, 'è§¸æ§å·¦åŠé‚Šé¸æ“‡é¸é …ï¼Œå³åŠé‚Šç¹¼çºŒ', 'ç„¡', 'ç„¡', 'è§¸æ§å·¦åŠé‚Šé¸æ“‡é¸é …ï¼Œå³åŠé‚Šç¹¼çºŒå°è©±');
        }
        
        function selectCurrentOption() {
            currentPhase = 'response';
            
            const dialogText = document.getElementById('dialog-text');
            const dialogOk = document.getElementById('dialog-ok');
            
            dialogText.innerText = dialogData.responses[selectedOption];
            dialogOk.onclick = endDialog;
            
            updateStatus('å›æ‡‰éšæ®µ', `é¸é … ${selectedOption + 1}`, 'ç„¡', 'ç„¡', 'ç„¡', `âœ… æˆåŠŸé¸æ“‡é¸é … ${selectedOption + 1}ï¼è§¸æ§å³åŠé‚ŠçµæŸå°è©±`);
        }
        
        function endDialog() {
            const dialog = document.getElementById('coco-dialog');
            dialog.classList.remove('show');
            updateStatus('æœªé–‹å§‹', 'ç„¡', 'ç„¡', 'ç„¡', 'ç„¡', 'å°è©±çµæŸï¼Œè«‹é‡æ–°é–‹å§‹æ¸¬è©¦');
        }
        
        function resetDialog() {
            const dialog = document.getElementById('coco-dialog');
            dialog.classList.remove('show');
            currentPhase = 'none';
            selectedOption = 0;
            updateStatus('æœªé–‹å§‹', 'ç„¡', 'ç„¡', 'ç„¡', 'ç„¡', 'å°è©±å·²é‡ç½®');
        }
        
        // è§¸æ§äº‹ä»¶è™•ç†ï¼ˆæ¨¡æ“¬ main.js çš„æ–°é‚è¼¯ï¼‰
        function initTouchEvents() {
            const dialog = document.getElementById('coco-dialog');
            
            dialog.addEventListener('touchstart', (e) => {
                e.preventDefault();
                
                const touch = e.touches[0];
                const rect = dialog.getBoundingClientRect();
                const x = touch.clientX;
                const y = touch.clientY;
                const relativeY = y - rect.top;
                const relativeX = x - rect.left;
                const dialogWidth = rect.width;
                
                // æª¢æŸ¥æ˜¯å¦è§¸æ§è¢å¹•å³åŠé‚Šï¼ˆç¹¼çºŒå°è©±ï¼‰
                const isRightHalf = relativeX > dialogWidth / 2;
                
                if (isRightHalf) {
                    console.log('ğŸ“± è§¸æ§è¢å¹•å³åŠé‚Šï¼Œç¹¼çºŒå°è©±');
                    // è§¸æ§å³åŠé‚Šï¼Œç¹¼çºŒå°è©±
                    const dialogOk = document.getElementById('dialog-ok');
                    if (dialogOk) {
                        dialogOk.click();
                    }
                    
                    updateStatus(
                        'è§¸æ§æª¢æ¸¬', 
                        `é¸é … ${selectedOption + 1}`, 
                        `(${x.toFixed(0)}, ${y.toFixed(0)})`, 
                        'å³åŠé‚Šï¼ˆç¹¼çºŒå°è©±ï¼‰', 
                        'ç„¡', 
                        'âœ… è§¸æ§å³åŠé‚Šï¼Œç¹¼çºŒå°è©±'
                    );
                    return;
                }
                
                // è§¸æ§å·¦åŠé‚Šï¼Œé¸æ“‡é¸é …
                if (currentPhase === 'options') {
                    // æ¨¡æ“¬ main.js çš„è§¸æ§ä½ç½®è¨ˆç®—
                    const contentStartY = 40;
                    const optionHeight = 60;
                    
                    let selectedOptionIndex = -1;
                    if (relativeY >= contentStartY && relativeY < contentStartY + optionHeight) {
                        selectedOptionIndex = 0;
                    } else if (relativeY >= contentStartY + optionHeight && relativeY < contentStartY + optionHeight * 2) {
                        selectedOptionIndex = 1;
                    } else if (relativeY >= contentStartY + optionHeight * 2 && relativeY < contentStartY + optionHeight * 3) {
                        selectedOptionIndex = 2;
                    }
                    
                    // æ›´æ–°ç‹€æ…‹é¡¯ç¤º
                    const coords = `(${x.toFixed(0)}, ${y.toFixed(0)})`;
                    const area = 'å·¦åŠé‚Šï¼ˆé¸æ“‡é¸é …ï¼‰';
                    const index = selectedOptionIndex >= 0 ? selectedOptionIndex : 'ç„¡æ•ˆ';
                    
                    if (selectedOptionIndex >= 0 && selectedOptionIndex < 3) {
                        selectedOption = selectedOptionIndex;
                        showOptions(); // é‡æ–°æ¸²æŸ“é¸é …
                        updateStatus(
                            'é¸é …éšæ®µ', 
                            `é¸é … ${selectedOption + 1}`, 
                            coords, 
                            area, 
                            index, 
                            `âœ… è§¸æ§å·¦åŠé‚Šé¸æ“‡é¸é … ${selectedOption + 1}`
                        );
                    } else {
                        updateStatus(
                            'é¸é …éšæ®µ', 
                            `é¸é … ${selectedOption + 1}`, 
                            coords, 
                            area, 
                            index, 
                            'âŒ è§¸æ§ä½ç½®ç„¡æ•ˆï¼Œç„¡æ³•é¸æ“‡é¸é …'
                        );
                    }
                } else {
                    updateStatus(
                        'è§¸æ§æª¢æ¸¬', 
                        `é¸é … ${selectedOption + 1}`, 
                        `(${x.toFixed(0)}, ${y.toFixed(0)})`, 
                        'å·¦åŠé‚Šï¼ˆé¸æ“‡é¸é …ï¼‰', 
                        'ç„¡', 
                        'âš ï¸ ç•¶å‰éšæ®µç„¡æ³•é¸æ“‡é¸é …'
                    );
                }
            });
            
            console.log('ğŸ“± è§¸æ§äº‹ä»¶å·²åˆå§‹åŒ–');
        }
        
        // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
        window.addEventListener('load', () => {
            initTouchEvents();
            updateStatus('æœªé–‹å§‹', 'ç„¡', 'ç„¡', 'ç„¡', 'ç„¡', 'è«‹é–‹å§‹æ¸¬è©¦');
        });
    </script>
</body>
</html>
