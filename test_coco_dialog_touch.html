<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coco å°è©±è§¸æ§æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(#a7eaff, #f0f8ff);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin: 24px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .test-section h2 {
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #007bff;
            padding-bottom: 8px;
        }
        
        .coco-dialog-simulator {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            text-align: center;
        }
        
        .coco-dialog {
            background: transparent;
            border: none;
            padding: 20px;
            margin: 16px 0;
            display: none;
            text-align: center;
        }
        
        .coco-dialog.show {
            display: block;
        }
        
        .coco-dialog-text {
            color: #fff;
            text-shadow: 2px 2px 0 #000;
            font-size: 28px;
            line-height: 36px;
            margin-bottom: 20px;
            white-space: pre-line;
        }
        
        .coco-dialog-ok {
            background: transparent;
            border: none;
            color: #fff;
            text-shadow: 2px 2px 0 #000;
            font-size: 28px;
            padding: 0;
            margin: 0;
            cursor: pointer;
            text-decoration: underline;
            animation: arrowBlink 1.5s ease-in-out infinite;
        }
        
        .option-selected {
            animation: rpgCursorShake 0.8s ease-in-out infinite;
            display: inline-block;
            text-shadow: 2px 2px 0 #000;
            color: #ffffff;
            font-weight: bold;
        }
        
        .symbol-left, .symbol-right {
            animation: symbolBlink 1.5s ease-in-out infinite;
            color: #ffffff;
            text-shadow: 2px 2px 0 #000;
            font-weight: bold;
        }
        
        .status-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
            font-family: monospace;
        }
        
        .touch-hint {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            padding: 12px;
            margin: 16px 0;
            color: #0c5460;
        }
        
        .test-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin: 8px;
        }
        
        .test-button:hover {
            background: #218838;
        }
        
        @keyframes arrowBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        @keyframes rpgCursorShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-1px); }
            75% { transform: translateX(1px); }
        }
        
        @keyframes symbolBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }
        
        @media (max-width: 768px) {
            .test-container {
                margin: 10px;
                padding: 16px;
            }
            
            .coco-dialog-text {
                font-size: 20px;
                line-height: 28px;
            }
            
            .coco-dialog-ok {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ­ Coco å°è©±è§¸æ§æ¸¬è©¦</h1>
        
        <div class="touch-hint">
            <strong>ğŸ“± è§¸æ§æç¤ºï¼š</strong> åœ¨æ‰‹æ©Ÿä¸Šè§¸æ§ä»¥ä¸‹æŒ‰éˆ•å’Œé¸é …ä¾†æ¸¬è©¦ Coco å°è©±è§¸æ§åŠŸèƒ½
        </div>
        
        <div class="test-section">
            <h2>ğŸ¯ æ¸¬è©¦ç›®æ¨™</h2>
            <p>é€™å€‹æ¸¬è©¦é é¢æ¨¡æ“¬éŠæˆ²ä¸­èˆ‡ Coco çš„å°è©±ï¼Œæ¸¬è©¦è§¸æ§åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
            <ul>
                <li>âœ… è§¸æ§å°è©±é¸é …é€²è¡Œé¸æ“‡</li>
                <li>âœ… è§¸æ§ç¢ºèªæŒ‰éˆ•ç¹¼çºŒå°è©±</li>
                <li>âœ… è§¸æ§åé¥‹å’Œè¦–è¦ºæ•ˆæœ</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2>ğŸ­ Coco å°è©±æ¨¡æ“¬</h2>
            <div class="coco-dialog-simulator">
                <h3>å°è©±éšæ®µæ¸¬è©¦</h3>
                <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•ä¾†æ¸¬è©¦ä¸åŒçš„å°è©±éšæ®µï¼š</p>
                
                <button class="test-button" onclick="startIntro()">é–‹å§‹ä»‹ç´¹</button>
                <button class="test-button" onclick="showOptions()">é¡¯ç¤ºé¸é …</button>
                <button class="test-button" onclick="showResponse()">é¡¯ç¤ºå›æ‡‰</button>
                <button class="test-button" onclick="resetDialog()">é‡ç½®å°è©±</button>
                
                <div id="coco-dialog" class="coco-dialog">
                    <div id="coco-dialog-text" class="coco-dialog-text">
                        æ­¡è¿ä¾†åˆ° Johnny çš„ 28 æ­²ç”Ÿæ—¥å†’éšªï¼
                    </div>
                    <button id="coco-dialog-ok" class="coco-dialog-ok">â–¼</button>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š æ¸¬è©¦ç‹€æ…‹</h2>
            <div class="status-display">
                <div><strong>ç•¶å‰éšæ®µ:</strong> <span id="current-phase">æœªé–‹å§‹</span></div>
                <div><strong>è§¸æ§æª¢æ¸¬:</strong> <span id="touch-status">æª¢æ¸¬ä¸­...</span></div>
                <div><strong>æœ€å¾Œæ“ä½œ:</strong> <span id="last-action">ç„¡</span></div>
                <div><strong>æ¸¬è©¦çµæœ:</strong> <span id="test-result">æœªé–‹å§‹</span></div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª æ¸¬è©¦èªªæ˜</h2>
            <div style="background: #f8f9fa; padding: 16px; border-radius: 6px;">
                <h3>æ¸¬è©¦æ­¥é©Ÿï¼š</h3>
                <ol>
                    <li><strong>é–‹å§‹ä»‹ç´¹</strong>ï¼šé»æ“ŠæŒ‰éˆ•é–‹å§‹ Coco çš„ä»‹ç´¹å°è©±</li>
                    <li><strong>é¡¯ç¤ºé¸é …</strong>ï¼šé»æ“ŠæŒ‰éˆ•é¡¯ç¤ºä¸‰å€‹å°è©±é¸é …</li>
                    <li><strong>è§¸æ§é¸é …</strong>ï¼šè§¸æ§å°è©±æ¡†ä¸­çš„é¸é …é€²è¡Œé¸æ“‡</li>
                    <li><strong>è§¸æ§ç¢ºèª</strong>ï¼šè§¸æ§ â–¼ æŒ‰éˆ•ç¹¼çºŒå°è©±</li>
                    <li><strong>é¡¯ç¤ºå›æ‡‰</strong>ï¼šé»æ“ŠæŒ‰éˆ•é¡¯ç¤º Coco çš„å›æ‡‰</li>
                </ol>
                
                <h3>é æœŸçµæœï¼š</h3>
                <ul>
                    <li>âœ… è§¸æ§å°è©±é¸é …æ‡‰è©²æœ‰éŸ¿æ‡‰</li>
                    <li>âœ… è§¸æ§ç¢ºèªæŒ‰éˆ•æ‡‰è©²ç¹¼çºŒå°è©±</li>
                    <li>âœ… é¸é …æ‡‰è©²æœ‰è¦–è¦ºåé¥‹ï¼ˆé–ƒçˆã€æ–æ“ºï¼‰</li>
                    <li>âœ… è§¸æ§åé¥‹æ‡‰è©²å³æ™‚ä¸”æº–ç¢º</li>
                </ul>
                
                <h3>æ‰‹æ©Ÿæ¸¬è©¦é‡é»ï¼š</h3>
                <ul>
                    <li>ğŸ“± è§¸æ§é¸é …æ˜¯å¦éˆæ•</li>
                    <li>ğŸ“± è§¸æ§ç¢ºèªæŒ‰éˆ•æ˜¯å¦æ­£å¸¸</li>
                    <li>ğŸ“± è¦–è¦ºæ•ˆæœæ˜¯å¦æ¸…æ™°</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // å°è©±æ•¸æ“š
        const dialogData = {
            introLines: [
                'COCOï¼šå˜¿ï½ä½ çµ‚æ–¼ä¾†å•¦ï¼ä»Šå¤©æ˜¯ä½ çš„ 28 æ­²ç”Ÿæ—¥å†’éšªä¹‹æ—¥ï¼',
                'COCOï¼šæˆ‘åšäº†ä¸€å€‹å°å°çš„æŒ‘æˆ°é€çµ¦ä½ ï¼Œæº–å‚™å¥½é–‹å§‹äº†å—ï¼Ÿ'
            ],
            options: [
                'å“‡ï¼å¦³é‚„ç‰¹åœ°æº–å‚™äº†éŠæˆ²çµ¦æˆ‘ï¼Ÿ',
                'å†’éšªï¼Ÿè©²ä¸æœƒæœ‰é™·é˜±å§â€¦â€¦',
                'ç•¶ç„¶ï¼æˆ‘è¶…æœŸå¾…çš„ï¼'
            ],
            responses: {
                0: 'COCOï¼šå˜¿å˜¿ï¼Œä¸ç„¶ä½ ä»¥ç‚ºæˆ‘å¹³å¸¸å·å·åœ¨å¿™ä»€éº¼ï¼Ÿæœ‰æ²’æœ‰æ„Ÿå—åˆ°æ»¿æ»¿çš„ç”¨å¿ƒ â¤',
                1: 'COCOï¼šè¢«ä½ ç™¼ç¾äº†ï¼Ÿä¸éå°±ç®—æœ‰é™·é˜±ï¼Œæˆ‘ä¹Ÿæœƒé™ªä½  â¤',
                2: 'COCOï¼šå°±çŸ¥é“ä½ æœƒé€™éº¼èªªï½æœç„¶æ˜¯æˆ‘çš„å¯¶è²ï¼'
            }
        };
        
        let currentPhase = 'none';
        let lineIdx = 0;
        let selectedOption = 0;
        
        // è§¸æ§æª¢æ¸¬
        function detectTouchSupport() {
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            document.getElementById('touch-status').textContent = hasTouch ? 'âœ… æ”¯æ´è§¸æ§' : 'âŒ ä¸æ”¯æ´è§¸æ§';
            return hasTouch;
        }
        
        // æ›´æ–°ç‹€æ…‹é¡¯ç¤º
        function updateStatus(phase, action, result) {
            document.getElementById('current-phase').textContent = phase;
            document.getElementById('last-action').textContent = action;
            if (result) {
                document.getElementById('test-result').textContent = result;
            }
        }
        
        // é–‹å§‹ä»‹ç´¹
        function startIntro() {
            currentPhase = 'intro';
            lineIdx = 0;
            selectedOption = 0;
            
            const dialog = document.getElementById('coco-dialog');
            const dialogText = document.getElementById('coco-dialog-text');
            const dialogOk = document.getElementById('coco-dialog-ok');
            
            dialog.classList.add('show');
            dialogText.innerText = dialogData.introLines[lineIdx];
            dialogOk.innerText = 'â–¼';
            dialogOk.onclick = advanceIntro;
            
            updateStatus('ä»‹ç´¹éšæ®µ', 'é–‹å§‹ä»‹ç´¹', 'ä»‹ç´¹å·²é–‹å§‹ï¼Œè«‹è§¸æ§ â–¼ æŒ‰éˆ•ç¹¼çºŒ');
        }
        
        // ç¹¼çºŒä»‹ç´¹
        function advanceIntro() {
            lineIdx++;
            if (lineIdx < dialogData.introLines.length) {
                const dialogText = document.getElementById('coco-dialog-text');
                dialogText.innerText = dialogData.introLines[lineIdx];
                updateStatus('ä»‹ç´¹éšæ®µ', 'ç¹¼çºŒä»‹ç´¹', 'è«‹è§¸æ§ â–¼ æŒ‰éˆ•ç¹¼çºŒ');
            } else {
                showOptions();
            }
        }
        
        // é¡¯ç¤ºé¸é …
        function showOptions() {
            currentPhase = 'options';
            selectedOption = 0;
            
            const dialogText = document.getElementById('coco-dialog-text');
            const dialogOk = document.getElementById('coco-dialog-ok');
            
            const optionsHtml = dialogData.options.map((option, idx) => {
                const selected = idx === selectedOption;
                if (selected) {
                    return `<span class="option-selected"><span class="symbol-left">></span> ${option} <span class="symbol-right"><</span></span>`;
                } else {
                    return `  ${option}  `;
                }
            }).join('<br>');
            
            dialogText.innerHTML = optionsHtml;
            dialogOk.innerText = 'â–¼';
            dialogOk.onclick = selectOption;
            
            updateStatus('é¸é …éšæ®µ', 'é¡¯ç¤ºé¸é …', 'é¸é …å·²é¡¯ç¤ºï¼Œè«‹è§¸æ§é¸é …é€²è¡Œé¸æ“‡');
        }
        
        // é¸æ“‡é¸é …
        function selectOption() {
            const dialogText = document.getElementById('coco-dialog-text');
            const dialogOk = document.getElementById('coco-dialog-ok');
            
            dialogText.innerText = dialogData.responses[selectedOption];
            dialogOk.innerText = 'â–¼';
            dialogOk.onclick = endDialog;
            
            updateStatus('å›æ‡‰éšæ®µ', 'é¸æ“‡é¸é …', `âœ… é¸é … ${selectedOption + 1} è§¸æ§æ¸¬è©¦é€šéï¼`);
        }
        
        // çµæŸå°è©±
        function endDialog() {
            const dialog = document.getElementById('coco-dialog');
            dialog.classList.remove('show');
            updateStatus('æœªé–‹å§‹', 'çµæŸå°è©±', 'å°è©±å·²çµæŸï¼Œè«‹é‡æ–°é–‹å§‹æ¸¬è©¦');
        }
        
        // é‡ç½®å°è©±
        function resetDialog() {
            const dialog = document.getElementById('coco-dialog');
            dialog.classList.remove('show');
            currentPhase = 'none';
            lineIdx = 0;
            selectedOption = 0;
            updateStatus('æœªé–‹å§‹', 'é‡ç½®å°è©±', 'å°è©±å·²é‡ç½®ï¼Œè«‹é‡æ–°é–‹å§‹æ¸¬è©¦');
        }
        
        // è§¸æ§äº‹ä»¶è™•ç†
        function initTouchEvents() {
            if (detectTouchSupport()) {
                // ç‚ºå°è©±æ¡†æ·»åŠ è§¸æ§äº‹ä»¶
                const dialog = document.getElementById('coco-dialog');
                const dialogOk = document.getElementById('coco-dialog-ok');
                
                // å°è©±æ¡†è§¸æ§äº‹ä»¶
                dialog.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    console.log('ğŸ“± è§¸æ§å°è©±æ¡†');
                    
                    if (currentPhase === 'options') {
                        // åœ¨é¸é …éšæ®µï¼Œè§¸æ§å°è©±æ¡†æœƒé¸æ“‡ç•¶å‰é¸ä¸­çš„é¸é …
                        console.log('ğŸ“± è§¸æ§é¸æ“‡é¸é …');
                        selectOption();
                    } else {
                        // åœ¨å…¶ä»–éšæ®µï¼Œè§¸æ§å°è©±æ¡†æœƒè§¸ç™¼ç¢ºèªæŒ‰éˆ•
                        console.log('ğŸ“± è§¸æ§è§¸ç™¼ç¢ºèª');
                        if (dialogOk.onclick) {
                            dialogOk.onclick();
                        }
                    }
                });
                
                // ç¢ºèªæŒ‰éˆ•è§¸æ§äº‹ä»¶
                dialogOk.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    console.log('ğŸ“± è§¸æ§ç¢ºèªæŒ‰éˆ•');
                    if (dialogOk.onclick) {
                        dialogOk.onclick();
                    }
                });
                
                console.log('ğŸ“± Coco å°è©±è§¸æ§äº‹ä»¶å·²åˆå§‹åŒ–');
            }
        }
        
        // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
        window.addEventListener('load', () => {
            initTouchEvents();
            updateStatus('æœªé–‹å§‹', 'é é¢å·²åŠ è¼‰', 'è«‹é–‹å§‹æ¸¬è©¦');
        });
        
        // ç›£è½è§¸æ§äº‹ä»¶
        document.addEventListener('touchstart', (e) => {
            console.log('ğŸ“± è§¸æ§é–‹å§‹:', e.touches[0].clientX, e.touches[0].clientY);
        });
        
        document.addEventListener('touchend', (e) => {
            console.log('ğŸ“± è§¸æ§çµæŸ');
        });
    </script>
</body>
</html>
