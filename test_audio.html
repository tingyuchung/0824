<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èƒŒæ™¯éŸ³æ¨‚æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .volume-control {
            margin: 10px 0;
        }
        input[type="range"] {
            width: 200px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            background: #e9ecef;
        }
    </style>
</head>
<body>
    <h1>ğŸµ èƒŒæ™¯éŸ³æ¨‚åŠŸèƒ½æ¸¬è©¦</h1>
    
    <div class="test-section">
        <h2>éŸ³æ¨‚æ§åˆ¶</h2>
        <button onclick="playMusic()">æ’­æ”¾éŸ³æ¨‚</button>
        <button onclick="pauseMusic()">æš«åœéŸ³æ¨‚</button>
        <button onclick="stopMusic()">åœæ­¢éŸ³æ¨‚</button>
        <button onclick="resumeMusic()">æ¢å¾©éŸ³æ¨‚</button>
        
        <div class="volume-control">
            <label for="volume">éŸ³é‡æ§åˆ¶:</label>
            <input type="range" id="volume" min="0" max="100" value="30" onchange="changeVolume(this.value)">
            <span id="volumeValue">30%</span>
        </div>
        
        <div class="status" id="status">æº–å‚™å°±ç·’</div>
    </div>
    
    <div class="test-section">
        <h2>éŸ³æ¨‚è³‡è¨Š</h2>
        <p><strong>éŸ³æ¨‚æ–‡ä»¶:</strong> music/game_bgm.mp3</p>
        <p><strong>æ–‡ä»¶å¤§å°:</strong> 41MB</p>
        <p><strong>æ ¼å¼:</strong> MP3</p>
        <p><strong>å¾ªç’°æ’­æ”¾:</strong> æ˜¯</p>
    </div>
    
    <div class="test-section">
        <h2>ä½¿ç”¨èªªæ˜</h2>
        <ol>
            <li>é»æ“Šã€Œæ’­æ”¾éŸ³æ¨‚ã€é–‹å§‹æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚</li>
            <li>ä½¿ç”¨ã€Œæš«åœéŸ³æ¨‚ã€æš«æ™‚åœæ­¢æ’­æ”¾</li>
            <li>ä½¿ç”¨ã€Œæ¢å¾©éŸ³æ¨‚ã€ç¹¼çºŒæ’­æ”¾</li>
            <li>ä½¿ç”¨ã€Œåœæ­¢éŸ³æ¨‚ã€å®Œå…¨åœæ­¢ä¸¦é‡ç½®</li>
            <li>èª¿æ•´éŸ³é‡æ»‘æ¡¿ä¾†æ”¹è®ŠéŸ³é‡å¤§å°</li>
        </ol>
    </div>

    <script>
        let bgMusic = null;
        let bgMusicVolume = 0.3;
        
        // åˆå§‹åŒ–èƒŒæ™¯éŸ³æ¨‚
        function initBackgroundMusic() {
            try {
                bgMusic = new Audio('music/game_bgm.mp3');
                bgMusic.loop = true; // å¾ªç’°æ’­æ”¾
                bgMusic.volume = bgMusicVolume;
                bgMusic.preload = 'auto';
                
                // è™•ç†éŸ³é »åŠ è¼‰éŒ¯èª¤
                bgMusic.addEventListener('error', (e) => {
                    updateStatus('âŒ èƒŒæ™¯éŸ³æ¨‚åŠ è¼‰å¤±æ•—: ' + e.message, 'error');
                });
                
                // è™•ç†éŸ³é »åŠ è¼‰å®Œæˆ
                bgMusic.addEventListener('canplaythrough', () => {
                    updateStatus('âœ… èƒŒæ™¯éŸ³æ¨‚åŠ è¼‰å®Œæˆ', 'success');
                });
                
                // è™•ç†æ’­æ”¾é–‹å§‹
                bgMusic.addEventListener('play', () => {
                    updateStatus('ğŸµ éŸ³æ¨‚é–‹å§‹æ’­æ”¾', 'success');
                });
                
                // è™•ç†æ’­æ”¾æš«åœ
                bgMusic.addEventListener('pause', () => {
                    updateStatus('â¸ï¸ éŸ³æ¨‚å·²æš«åœ', 'info');
                });
                
                // è™•ç†æ’­æ”¾çµæŸ
                bgMusic.addEventListener('ended', () => {
                    updateStatus('ğŸ”š éŸ³æ¨‚æ’­æ”¾çµæŸ', 'info');
                });
                
                updateStatus('ğŸµ èƒŒæ™¯éŸ³æ¨‚åˆå§‹åŒ–å®Œæˆ', 'success');
            } catch (e) {
                updateStatus('âŒ ç„¡æ³•å‰µå»ºéŸ³é »å°è±¡: ' + e.message, 'error');
            }
        }
        
        // æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚
        function playMusic() {
            if (bgMusic && bgMusic.readyState >= 2) {
                bgMusic.play().then(() => {
                    updateStatus('ğŸµ éŸ³æ¨‚æ’­æ”¾æˆåŠŸ', 'success');
                }).catch(e => {
                    updateStatus('âŒ æ’­æ”¾å¤±æ•—: ' + e.message, 'error');
                });
            } else {
                updateStatus('âš ï¸ éŸ³æ¨‚å°šæœªæº–å‚™å¥½ï¼Œè«‹ç¨ç­‰', 'warning');
            }
        }
        
        // æš«åœèƒŒæ™¯éŸ³æ¨‚
        function pauseMusic() {
            if (bgMusic) {
                bgMusic.pause();
                updateStatus('â¸ï¸ éŸ³æ¨‚å·²æš«åœ', 'info');
            }
        }
        
        // åœæ­¢èƒŒæ™¯éŸ³æ¨‚
        function stopMusic() {
            if (bgMusic) {
                bgMusic.pause();
                bgMusic.currentTime = 0;
                updateStatus('â¹ï¸ éŸ³æ¨‚å·²åœæ­¢', 'info');
            }
        }
        
        // æ¢å¾©èƒŒæ™¯éŸ³æ¨‚
        function resumeMusic() {
            if (bgMusic && bgMusic.paused) {
                bgMusic.play().then(() => {
                    updateStatus('ğŸµ éŸ³æ¨‚æ¢å¾©æ’­æ”¾', 'success');
                }).catch(e => {
                    updateStatus('âŒ æ¢å¾©æ’­æ”¾å¤±æ•—: ' + e.message, 'error');
                });
            } else {
                updateStatus('âš ï¸ éŸ³æ¨‚æœªåœ¨æš«åœç‹€æ…‹', 'warning');
            }
        }
        
        // æ”¹è®ŠéŸ³é‡
        function changeVolume(value) {
            const volume = value / 100;
            bgMusicVolume = volume;
            if (bgMusic) {
                bgMusic.volume = volume;
            }
            document.getElementById('volumeValue').textContent = value + '%';
            updateStatus('ğŸ”Š éŸ³é‡å·²èª¿æ•´ç‚º ' + value + '%', 'info');
        }
        
        // æ›´æ–°ç‹€æ…‹é¡¯ç¤º
        function updateStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = 'status';
            
            // æ ¹æ“šé¡å‹æ·»åŠ é¡è‰²
            switch(type) {
                case 'success':
                    status.style.backgroundColor = '#d4edda';
                    status.style.color = '#155724';
                    status.style.border = '1px solid #c3e6cb';
                    break;
                case 'error':
                    status.style.backgroundColor = '#f8d7da';
                    status.style.color = '#721c24';
                    status.style.border = '1px solid #f5c6cb';
                    break;
                case 'warning':
                    status.style.backgroundColor = '#fff3cd';
                    status.style.color = '#856404';
                    status.style.border = '1px solid #ffeaa7';
                    break;
                case 'info':
                    status.style.backgroundColor = '#d1ecf1';
                    status.style.color = '#0c5460';
                    status.style.border = '1px solid #bee5eb';
                    break;
            }
        }
        
        // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
        window.addEventListener('load', () => {
            initBackgroundMusic();
        });
    </script>
</body>
</html>
